<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–§–∞–∫—Ç—ã –æ –∂–∏–≤–æ—Ç–Ω—ã—Ö</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            max-width: 500px;
            margin: 0 auto;
            padding: 20px;
            text-align: center;
            background-color: #e6f2ff;
            color: #333;
        }
        .container {
            background-color: white;
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        button {
            padding: 12px 24px;
            margin: 10px;
            font-size: 16px;
            cursor: pointer;
            border: none;
            border-radius: 8px;
            background-color: #4CAF50;
            color: white;
            transition: all 0.3s;
        }
        button:hover {
            opacity: 0.9;
        }
        #rejectName {
            background-color: #f44336;
        }
        #animalImage {
            max-width: 100%;
            max-height: 300px;
            margin: 20px auto;
            display: block;
            border-radius: 10px;
            border: 1px solid #ddd;
        }
        .fact {
            font-size: 16px;
            margin: 20px 0;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 8px;
            text-align: left;
            border-left: 4px solid #4CAF50;
        }
        .hidden {
            display: none;
        }
        .name-options {
            margin: 20px 0;
            font-style: italic;
            color: #555;
            line-height: 1.6;
        }
        .animal-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .animal-btn {
            width: 100%;
            padding: 15px;
            text-align: left;
            background-color: #f8f9fa;
            color: #333;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
        }
        #animalTitle {
            color: #2c3e50;
            margin-bottom: 15px;
        }
        #translateBtn {
            background-color: #3498db;
        }
        #backBtn {
            background-color: #95a5a6;
        }
        .translation {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px dashed #ccc;
        }
    </style>
</head>
<body>
<div id="welcomeContainer" class="container">
    <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h1>
    <div class="name-options">
        <p>–Ø –±—É–¥—É –∑–≤–∞—Ç—å —Ç–µ–±—è <span id="randomName" style="font-weight:bold">...</span>, –æ–∫?</p>
        <p>–õ–∞–¥–Ω–æ...</p>
        <p>–ê –º–æ–∂–µ—Ç –Ω–µ –Ω–∞–¥–æ?..</p>
    </div>
    <div>
        <button id="acceptName">–î–∞, –æ—Ç–ª–∏—á–Ω–æ!</button>
        <button id="rejectName">–ù–µ—Ç, –¥—Ä—É–≥–æ–µ –∏–º—è</button>
    </div>
</div>

<div id="animalSelectionContainer" class="container hidden">
    <h2>–ù–∞ —á—å–µ–π —Ç—ã —Å—Ç–æ—Ä–æ–Ω–µ?</h2>
    <div class="animal-options">
        <button id="dogBtn" class="animal-btn">üê∂ –°–æ–±–∞–∫–∏</button>
        <button id="catBtn" class="animal-btn">üê± –ö–æ—à–∫–∏</button>
        <button id="foxBtn" class="animal-btn">ü¶ä –õ–∏—Å—ã (???)</button>
    </div>
</div>

<div id="animalFactContainer" class="container hidden">
    <h2 id="animalTitle"></h2>
    <img id="animalImage" referrerpolicy="no-referrer">
    <div class="fact">
        <p id="animalFact"></p>
        <div id="animalFactRu" class="translation hidden">
            <p id="translatedText"></p>
            <button id="translateBtn">–°–∫—Ä—ã—Ç—å –ø–µ—Ä–µ–≤–æ–¥</button>
        </div>
        <button id="showTranslateBtn">–ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –Ω–∞ —Ä—É—Å—Å–∫–∏–π</button>
    </div>
    <button id="backBtn">–ù–∞–∑–∞–¥ –∫ –≤—ã–±–æ—Ä—É</button>
</div>

<script>
    // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
    const welcomeContainer = document.getElementById('welcomeContainer');
    const animalSelectionContainer = document.getElementById('animalSelectionContainer');
    const animalFactContainer = document.getElementById('animalFactContainer');
    const randomNameSpan = document.getElementById('randomName');
    const acceptNameBtn = document.getElementById('acceptName');
    const rejectNameBtn = document.getElementById('rejectName');
    const dogBtn = document.getElementById('dogBtn');
    const catBtn = document.getElementById('catBtn');
    const foxBtn = document.getElementById('foxBtn');
    const animalTitle = document.getElementById('animalTitle');
    const animalImage = document.getElementById('animalImage');
    const animalFact = document.getElementById('animalFact');
    const animalFactRu = document.getElementById('animalFactRu');
    const translatedText = document.getElementById('translatedText');
    const showTranslateBtn = document.getElementById('showTranslateBtn');
    const translateBtn = document.getElementById('translateBtn');
    const backBtn = document.getElementById('backBtn');

    // –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    let currentAnimal = '';
    let currentFact = '';
    let currentName = '';

    // –°–ø–∏—Å–æ–∫ –∏–º–µ–Ω –∏ –∏—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤
    const namesAndTranslations = {
        "Toilet Mail": "–ü–æ—á—Ç–æ–≤—ã–π –¢—É–∞–ª–µ—Ç",
        "Puppy Solar": "–°–æ–ª–Ω–µ—á–Ω—ã–π –©–µ–Ω–æ–∫",
        "Fluffy Cloud": "–ü—É—à–∏—Å—Ç–æ–µ –û–±–ª–∞–∫–æ",
        "Rainbow Spark": "–†–∞–¥—É–∂–Ω–∞—è –ò—Å–∫—Ä–∞"
    };

    // –°–ª–æ–≤–∞—Ä—å –ø–µ—Ä–µ–≤–æ–¥–æ–≤ —Ñ–∞–∫—Ç–æ–≤
    const factTranslations = {
        // –§–∞–∫—Ç—ã –æ –∫–æ—à–∫–∞—Ö
        "A cat's purr may be a form of self-healing, as it can be a sign of nervousness as well as contentment.":
            "–ú—É—Ä–ª—ã–∫–∞–Ω—å–µ –∫–æ—à–∫–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ñ–æ—Ä–º–æ–π —Å–∞–º–æ–ª–µ—á–µ–Ω–∏—è, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–æ –º–æ–∂–µ—Ç —Å–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤–æ–≤–∞—Ç—å –∫–∞–∫ –æ –Ω–µ—Ä–≤–æ–∑–Ω–æ—Å—Ç–∏, —Ç–∞–∫ –∏ –æ –¥–æ–≤–æ–ª—å—Å—Ç–≤–µ.",
        "Cats can rotate their ears 180 degrees.": "–ö–æ—à–∫–∏ –º–æ–≥—É—Ç –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å —É—à–∏ –Ω–∞ 180 –≥—Ä–∞–¥—É—Å–æ–≤.",

        // –§–∞–∫—Ç—ã –æ —Å–æ–±–∞–∫–∞—Ö
        "All puppies are born deaf.": "–í—Å–µ —â–µ–Ω–∫–∏ —Ä–æ–∂–¥–∞—é—Ç—Å—è –≥–ª—É—Ö–∏–º–∏.",
        "Dogs can smell thousands of times better than humans.":
            "–°–æ–±–∞–∫–∏ —á—É–≤—Å—Ç–≤—É—é—Ç –∑–∞–ø–∞—Ö–∏ –≤ —Ç—ã—Å—è—á–∏ —Ä–∞–∑ –ª—É—á—à–µ, —á–µ–º –ª—é–¥–∏.",
        "A dog's nose print is unique, much like a human's fingerprint.":
            "–û—Ç–ø–µ—á–∞—Ç–æ–∫ –Ω–æ—Å–∞ —Å–æ–±–∞–∫–∏ —É–Ω–∏–∫–∞–ª–µ–Ω, –∫–∞–∫ –æ—Ç–ø–µ—á–∞—Ç–æ–∫ –ø–∞–ª—å—Ü–∞ —á–µ–ª–æ–≤–µ–∫–∞.",

        // –§–∞–∫—Ç—ã –æ –ª–∏—Å–∞—Ö
        "Foxes use the Earth's magnetic field to hunt.":
            "–õ–∏—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –º–∞–≥–Ω–∏—Ç–Ω–æ–µ –ø–æ–ª–µ –ó–µ–º–ª–∏ –¥–ª—è –æ—Ö–æ—Ç—ã.",
        "Foxes can make more than 40 different sounds.":
            "–õ–∏—Å—ã –º–æ–≥—É—Ç –∏–∑–¥–∞–≤–∞—Ç—å –±–æ–ª–µ–µ 40 —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∑–≤—É–∫–æ–≤.",
        "A group of foxes is called a 'skulk' or 'leash'.":
            "–ì—Ä—É–ø–ø–∞ –ª–∏—Å –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è '—Ç–∞–π–∫–æ–º' –∏–ª–∏ '—Å–≤–æ—Ä–∞'."
    };

    // –ó–∞–ø–∞—Å–Ω—ã–µ —Ñ–∞–∫—Ç—ã –Ω–∞ —Å–ª—É—á–∞–π –ø—Ä–æ–±–ª–µ–º —Å API
    const fallbackFacts = {
        dog: [
            "Dogs have been man's best friend for over 14,000 years.",
            "The Basenji dog is the only breed that doesn't bark."
        ],
        cat: [
            "Cats spend 70% of their lives sleeping.",
            "A cat's nose is as unique as a human's fingerprint."
        ],
        fox: [
            "Foxes are solitary animals unlike wolves which live in packs.",
            "Arctic foxes don't shiver until temperatures drop to -70¬∞C (-94¬∞F)."
        ]
    };

    // –ó–∞–ø–∞—Å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    const fallbackImages = {
        dog: "https://images.unsplash.com/photo-1586671267731-da2cf3ceeb80?w=500",
        cat: "https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?w=500",
        fox: "https://images.unsplash.com/photo-1474511320723-9a56873867b5?w=500"
    };

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∏–º–µ–Ω–∏
    async function getRandomName() {
        const names = Object.keys(namesAndTranslations);
        return names[Math.floor(Math.random() * names.length)];
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∏–º–µ–Ω–∏
    async function showNewRandomName() {
        currentName = await getRandomName();
        randomNameSpan.textContent = currentName;
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ñ–∞–∫—Ç–∞ –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∂–∏–≤–æ—Ç–Ω–æ–≥–æ
    async function getAnimalData(animal) {
        try {
            let apiUrl = '';
            let imgUrl = '';
            let title = '';

            if (animal === 'dog') {
                apiUrl = 'https://some-random-api.ml/facts/dog';
                imgUrl = 'https://some-random-api.ml/img/dog';
                title = '–°–æ–±–∞–∫–∞';
            } else if (animal === 'cat') {
                apiUrl = 'https://some-random-api.ml/facts/cat';
                imgUrl = 'https://some-random-api.ml/img/cat';
                title = '–ö–æ—à–∫–∞';
            } else if (animal === 'fox') {
                apiUrl = 'https://some-random-api.ml/facts/fox';
                imgUrl = 'https://some-random-api.ml/img/fox';
                title = '–õ–∏—Å–∞';
            }

            const [factResponse, imgResponse] = await Promise.all([
                fetch(apiUrl),
                fetch(imgUrl)
            ]);

            let factData, imgData;

            // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ—Ç–≤–µ—Ç —Å —Ñ–∞–∫—Ç–æ–º
            if (factResponse.ok) {
                factData = await factResponse.json();
            } else {
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º –∑–∞–ø–∞—Å–Ω—ã–µ —Ñ–∞–∫—Ç—ã –µ—Å–ª–∏ API –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
                const facts = fallbackFacts[animal];
                factData = { fact: facts[Math.floor(Math.random() * facts.length)] };
            }

            // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ—Ç–≤–µ—Ç —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
            if (imgResponse.ok) {
                imgData = await imgResponse.json();
            } else {
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º –∑–∞–ø–∞—Å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
                imgData = { link: fallbackImages[animal] };
            }

            return {
                image: imgData.link,
                fact: factData.fact,
                title: title
            };
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞:', error);
            // –ü–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–ø–∞—Å–Ω–æ–π –≤–∞—Ä–∏–∞–Ω—Ç
            const facts = fallbackFacts[animal];
            return {
                image: fallbackImages[animal],
                fact: facts[Math.floor(Math.random() * facts.length)],
                title: animal === 'dog' ? '–°–æ–±–∞–∫–∞' : animal === 'cat' ? '–ö–æ—à–∫–∞' : '–õ–∏—Å–∞'
            };
        }
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞
    function translateFact(fact) {
        return factTranslations[fact] || "–ü–µ—Ä–µ–≤–æ–¥ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω";
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    showNewRandomName();

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
    acceptNameBtn.addEventListener('click', () => {
        welcomeContainer.classList.add('hidden');
        animalSelectionContainer.classList.remove('hidden');
    });

    rejectNameBtn.addEventListener('click', showNewRandomName);

    dogBtn.addEventListener('click', async () => {
        currentAnimal = 'dog';
        await showAnimalFact();
    });

    catBtn.addEventListener('click', async () => {
        currentAnimal = 'cat';
        await showAnimalFact();
    });

    foxBtn.addEventListener('click', async () => {
        currentAnimal = 'fox';
        await showAnimalFact();
    });

    async function showAnimalFact() {
        animalSelectionContainer.classList.add('hidden');
        animalFactContainer.classList.remove('hidden');

        const animalData = await getAnimalData(currentAnimal);
        animalImage.src = animalData.image;
        animalFact.textContent = animalData.fact;
        animalTitle.textContent = animalData.title;
        currentFact = animalData.fact;

        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–µ—Ä–µ–≤–æ–¥
        translatedText.textContent = translateFact(currentFact);

        // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–∞
        animalFactRu.classList.add('hidden');
        showTranslateBtn.style.display = 'block';
        showTranslateBtn.textContent = '–ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –Ω–∞ —Ä—É—Å—Å–∫–∏–π';
    }

    backBtn.addEventListener('click', () => {
        animalFactContainer.classList.add('hidden');
        animalSelectionContainer.classList.remove('hidden');
    });

    showTranslateBtn.addEventListener('click', () => {
        animalFactRu.classList.remove('hidden');
        showTranslateBtn.style.display = 'none';
    });

    translateBtn.addEventListener('click', () => {
        animalFactRu.classList.add('hidden');
        showTranslateBtn.style.display = 'block';
    });
</script>
</body>
</html>
